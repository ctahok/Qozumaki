var CreatorForms=function(){"use strict";function e(r){c=!0;var n=document.createElement("script");document.head.appendChild(n),n.src=r,n.onload=function(){if(p.length>0)e(p.shift());else{m=!0;for(var r=0;r<s.length;r++)t(s[r],u[r]);!function(){window.ZCApp&&(window.ZCApp.contextPath="/siteforms",window.ZCForm&&(ZCForm.callbackFunc=function(e,t,r,n,i,l,m){if(e){var c="formMsg_"+e,s=document.querySelector("[data-element-id="+c+"]");s.style.color="green";var u="zc_success"===l?"":l;s.innerText=u,s.parentNode.style.display="",setTimeout(function(){s.parentNode.style.display="none"},5e3);var p=f("elname",e,"form");p.reset(),relodCurrentForm=!1,a(e+"_fileUpload",!0),o(p),ZCForm.regFormEvents(e,d)}},ZCApp.showErrorDialog=function(e,t){var r="formMsg_"+l,n=document.querySelector("[data-element-id="+r+"]");n.style.color="red",n.innerText=t,n.parentNode.style.display="",setTimeout(function(){n.parentNode.style.display="none"},5e3),a(l+"_fileUpload",!1)},ZCForm.showFieldErr=function(e,t){if(e.length>0){var r=ZCForm.zcFormAttributes.eleErrTemplate;r=r.replace("insertMessage",t);var n=$D.findParent(e[0],"zpform-field-container");n.innerHTML+=r;var o=e.attr("fieldtype");switch(o){case"10":var a=n.querySelector("[data-element-id="+l+"_date]");i(a,"date");break;case"18":var m=n.querySelector("[data-element-id="+l+"_fileUpload]");m.addEventListener("change",function(e){ZCForm.browseAttachEvent(m)});var c=n.querySelector("[data-element-id="+l+"_fileRemove]");c.addEventListener("click",function(e){ZCForm.removeUploadedFile(c)}),ZCForm.regFormEvents(l,d);break;case"22":var a=n.querySelector("[data-element-id="+l+"_datetime]");i(a,"datetime")}}},ZCForm.removeUploadedFile=function(e){e instanceof jQuery&&(e=e.context);var t=e.parentNode,r=t.querySelector("input[type=file]");r.setAttribute("zc-Attached-Type","browse"),r.setAttribute("zc-DocId",""),r.setAttribute("isAttached","false"),r.value="";var n=r.cloneNode(!1);t.replaceChild(n,r);var o=n.nextElementSibling;$D.css(o,"display","none"),t.querySelector("input[subtype=file]").value="",n.addEventListener("change",function(e){n.setAttribute("changed","changed"),ZCForm.browseAttachEvent(n)})}));window.openWindowTask=function(e,t,r){"New window"==t?window.open(e,"_blank"):"Parent window"==t?window.open(e,"_parent"):"Same window"==t&&(window.location.href=e)},window.clearComponent=function(e,t,r){var n=ZCForm.clearField(e,t,r);if(!n){var o=e+"-"+t+"div",i=document.querySelector("[data-element-id="+o+"]");!i||"radio"!=i.getAttribute("fieldtype")&&"checkbox"!=i.getAttribute("fieldtype")||(i.innerHTML="")}"picklist"!=$(n).attr("type")&&"select-one"!=$(n).attr("type")||$(n).append(ZCUtil.createElem("option","value=-Select-","-"+i18n.selectOption+"-")),form_element[n]||(form_element[n]=n)},window.addValueToTheFieldElem=function(t,r,n,o,i,a){var l=document.getElementById(t+":"+r+"_recType_comp"),d=t+"-"+r+"div",m=document.querySelector("[data-element-id="+d+"]");m&&("radio"==m.getAttribute("fieldtype")||"checkbox"==m.getAttribute("fieldtype")?e(t,r,n,m.getAttribute("fieldtype"),o,m):addValue(t,r,l,n,o,i,null,null,a))};var e=function(e,t,r,n,o,i){var a=n+"El_"+t+"_"+r+"_"+o,l=$('<input id="'+a+'" name="'+t+'" formcompid="'+$(i).attr("formcompid")+'"delugetype="'+$(i).attr("delugetype")+'" onchangeexists="'+$(i).attr("onchangeexists")+'"  fieldtype="'+$(i).attr("fieldtypeno")+'" value="'+r+'" isformulaexist="'+$(i).attr("isformulaexist")+'" type="'+n+'"/><label>'+r+"</label>"),d=document.createElement("div");d.className="zpform-choice-container",d.appendChild(l[0]),d.appendChild(l[1]),$(i).append(d)};window.docid=function(e){return document.getElementById(e)}}()}}}function t(e,t){var n={};n.formId=e.getAttribute("data-app-sub-type"),$X.get({url:"/siteapps/forms",params:n,handler:r,args:{node:e,data:t}})}function r(e){var t=e.node,r=this.responseText;t.innerHTML=r;if(o(g=t.getElementsByTagName("form")[0],e.data),"live"==window.zs_rendering_mode){if(""!=r){i18n.selectOption=i18n.get("forms.common.optionselect"),i18n.invalidmsg=i18n.get("forms.error.msg"),i18n.pleasewait=i18n.get("forms.wait.msg"),function(e){e.addEventListener("submit",function(t){l=e.getAttribute("elname"),d=e.querySelector("input[name=recType]").getAttribute("value")});for(var t=e.getAttribute("elname")+"_datetime",r=e.querySelectorAll("[data-element-id="+t+"]"),n=0;n<r.length;n++)i(r[n],"datetime");for(var o=e.getAttribute("elname")+"_date",m=e.querySelectorAll("[data-element-id="+o+"]"),n=0;n<m.length;n++)i(m[n],"date");a(e.getAttribute("elname")+"_fileUpload",!1);for(var c=e.getAttribute("elname")+"_fileRemove",s=e.querySelectorAll("[data-element-id="+c+"]"),n=0;n<s.length;n++)i(s[n],"fileremove")}(g),ZCForm.inZohoCreator=!1;var m=g.getAttribute("onLoadExist"),c=t.querySelector("input[name=appLinkName]").getAttribute("value"),s=t.querySelector("input[name=formLinkName]").getAttribute("value"),u=g.getAttribute("dispname"),p=t.querySelector("input[name=recType]").getAttribute("value"),f=t.querySelector("input[name=formid]").getAttribute("value");ZCForm.zcFormAttributes.genScriptURL="/siteforms/generateJS.do",ZCForm.zcFormAttributes.formParentDiv=!1,ZCForm.zcFormAttributes.customCalendar=!0,ZCForm.zcFormAttributes.browseralert=!1,ZCForm.zcFormAttributes.ajaxreload=!0,ZCForm.zcFormAttributes.fieldContainer="div",ZCForm.zcFormAttributes.eleErrTemplate='<div class="zpform-errormsg" tag="eleErr"> insertMessage </div>',relodCurrentForm=!1;var v="formID="+f+",appLinkName="+c+",formDispName="+u+",formAccessType=1,formLinkName="+s;ZCForm.addToFormArr(v,s),"true"===m?doActionOnLoad(f,ZCForm.getForm(s,p)):ZCForm.enableForm(s,p),ZCForm.regFormEvents(s,p)}}else{var g;n(g=t.getElementsByTagName("form")[0],"submit");for(var y=g.getAttribute("elname")+"_fileUpload",b=document.querySelectorAll("[data-element-id="+y+"]"),A=0;A<b.length;A++)n(b[A],"click")}}function n(e,t){e.addEventListener(t,function(e){e.preventDefault()})}function o(e,t){if(e){var r=t&&t.loaded,n=e.querySelector("input[name=formid]").getAttribute("value"),o=(e.getAttribute("elname"),e.querySelector("[elname='zc-captcha']"));if(o){var i={};i.time=(new Date).getTime(),i.formid=n,$X.get({url:"/siteforms/getcaptcha.do",params:i,handler:function(){var t=decodeURIComponent(this.responseText),n=t.split("?")[1].split("&")[0].split("=")[1];e.querySelector("input[name=cdigest]").value=n,o.src=t,zsUtils.onImageLoad(o.parentNode,r)}})}else r()}}function i(e,t){switch(t){case"date":e.addEventListener("click",function(e){datepickerJS.init(e.currentTarget,"date")});break;case"datetime":e.addEventListener("click",function(e){datepickerJS.init(e.currentTarget,"datetime")});break;case"fileupload":e.addEventListener("change",function(e){ZCForm.browseAttachEvent(e.target)});break;case"fileremove":e.addEventListener("click",function(e){ZCForm.removeUploadedFile(e.currentTarget)})}}function a(e,t){for(var r=document.querySelectorAll("[data-element-id="+e+"]"),n=0;n<r.length;n++)t&&(r[n].previousElementSibling.value="",r[n].setAttribute("zc-Attached-Type","browse"),r[n].setAttribute("zc-DocId",""),r[n].setAttribute("isAttached","false"),r[n].setAttribute("changed","false"),r[n].value=""),i(r[n],"fileupload")}var l,d,m=!1,c=!1,s=[],u=[],p=[/Trident\/|MSIE/.test(window.navigator.userAgent)?"/siteforms/appcreator/live/common/js/jqueryie.js":"/siteforms/appcreator/live/common/js/jquery.js","/siteforms/appcreator/live/common/js/form.js","/siteforms/appcreator/live/common/js/generatejs.js","/siteforms/appcreator/live/common/js/searchableInput.js","/siteforms/appcreator/live/common/js/app.js","/siteforms/appcreator/live/common/js/securityutil.js"],f=function(e,t,r){for(var n,o,i=document.getElementsByTagName(r),a=0;a<i.length;a++){var l=(o=i[a]).getAttribute(e);if(l&&l==t){n=o;break}}return n};return{init:function(r,n){r.innerHTML="<h4 align='center'>"+i18n.get("forms.common.loading")+"</h4>",n.next&&n.next(),"live"==window.zs_rendering_mode?m?t(r,n):(s.push(r),u.push(n),!c&&e(p.shift())):t(r,n)}}}();